

# 物理层

***物理层任务***：透明传输比特流，确定与传输媒体的接口有关的一些特性：如机械特性、电气特性、功能特性和过程特性。

***数据通信模型***：分为三大部分，即源系统、传输系统和目的系统。

***物理层接口特性***：(熟练理解)
	机械特性：指明接口所用接线器的形状和尺寸、引脚数目和排列、固定和锁定装置等。
	电气特性：指明在接口电缆的各条线上出现的电压范围。
	功能特性：指明某条线上出现的某一电平的电压表示何种意义。
	过程特性：指明对于不同功能的各种可能事件的出现顺序。

***信道***：一般都是用来表示向某一个方向传送信息的媒体。因此，一条通信线路往往包含一条发送信道和一条接收信道。

***带宽***：用来表示网络的通信线路传送数据的能力，网络带宽表示在单位时间内从网络中的某一个点到另一点所能通过的“最高数据率”。

***码元***：码是信号元素和字符之间的事先约定好的转换。

***码元传输速率***：又称为波特率或调制速率，表示数字通信系统每秒传输的码元数，单位是波特。

***编码***：仅仅对基带信号的波形进行变换，使它能够与信道特性适应。变换后的信号仍然是基带信号。

***调制***：基带信号往往包含较多的低频分量，甚至有直流分量，而许多信道并不能传输这种低频分量或直流分量。为了解决这一问题，就必须对基带信号进行调制，调制分为两大类：第一类就是编码，第二类则需要使用载波进行调制，把基带信号的频率范围搬移到较高的频段，并转换为模拟信号，这样就能够更好地在模拟信道中传输，这一类称之为带通调制。

***奈氏准则***：在没有噪声干扰的理想情况下，为了保证不发生码间干扰，数据传输速率的上限是信道带宽的两倍。这意味着，若要不失真地传输信号，信号的最高频率分量不能超过信道带宽的一半。

***香农定理***：香农定理指出，在给定带宽和噪声水平的条件下，信道有一个理论上的最大传输速率（即信道容量），超过这个速率的信息传输将不可避免地出现错误。

***电路交换***：分为三步：建立连接（开始占用通信资源）、传输数据（一直占用通信资源）和释放连接（归还通信资源）。特点是：在数据传输过程中，这一物理通信路径始终被两个用户独占，直到通信结束时才释放。
优点：1、通信时延小；2、有序传输；3、没有冲突；4、实时性强
缺点：1、建立连接时间长；2、线路利用率低；3、灵活性差；4、难以实现差错控制

***报文交换***：数据交换的单位是报文，采用存储转发技术。用户加上源地址、目的地址等信息后，封装成报文，整个报文先传送到相邻的节点，全部存储后查找转发表，转发到下一个节点，如此重复，直到到达目的节点。每个报文都可单独选择到达目的端的路径。
优点：1、无建立连接的时延；2、灵活分配线路；3、线路利用率高；4、支持差错控制
缺点：1、转发时延高；2、缓存开销大；3、错误处理低效

***分组交换***：特点就是采用分组交换技术，解决了报文交换中报文过长的问题。源主机在发送之前，先把较长的报文划成若干较小的等长数据段，在每个数据段前面添加一些必要的信息（如源地址、目的地址和编号信息等）组成首部，构成分组。
优点：继承报文交换的优点；1、方便存储管理；2、传输效率高；3、减少了出错概率和重传代价
缺点：1、存在存储转发时延；2、需要传输额外的信息量；3、当分组交换网采用数据报服务时，可能出现失序、丢失或者重复分组的情况。



# 数据链路层

***数据链路层的功能***：让帧在一段链路上或一个网络中传输，三个主要功能：封装成帧、透明传输和差错检验

***封装成帧***：指在一段数据的前后分别添加首部和尾部，构成帧，帧是数据链路层的传送单元。组帧主要解决帧定界、帧同步、透明传输等问题

***透明传输***：指不论什么样的比特组合的数据，都能够按照原样无差错地在这个数据链路上传输

***差错检验***：因为信道噪声等原因，帧在传输的过程中可能会出现错误，这些错误分为位错和帧错，数据链路层有确认和重传机制（即向上提供可靠的服务）

- 位错：帧中某些位出现错误，通常采用CRC来发现位错
- 帧错：帧丢失、帧重复或帧失序等错误

***流量控制***：指由接收方控制发送方的发送速率，使接收方有足够的缓冲空间来接收每个帧。

***可靠传输***：发送方发送的数据都能被接收方正确的接收，通常采用确认和超时重传两种机制来实现。确认是指接收方每收到发送方发来的数据帧，都要向发送方发回一个确认帧，表示已正确地收到该数据帧。超时重传是指发送方在发送一个数据帧后就启动一个计时器，若在规定时间内没有收到所发送数据的确认帧，则重发该数据帧，直到发送成功为止。

***介质访问控制***：为使用介质的每个节点隔离来自同一信道上其他节点所传送的信号，以协调活动节点的传输

***ALOHA协议***：当总线型网络中的任何站点需要发送数据时，可以不进行任何检测就可以发送数据。若在一段时间内未收到确认，则该站点就认为传输过程中发生了冲突。发送站点需要等待一段随机的时间后再发送数据，直至发送成功

***CSMA协议***：载波监听多路访问，每个站点在发送前都先监听公用信道，发现信道空闲后再发送，则会大大降低冲突的可能性，从而提高信道的利用率。

***CSMA/CD协议***：载波监听多路访问/冲突检测协议是CSMA协议的改进方案，适用于总线型网络或半双工网络，载波监听是指每个站点在发送前和发送过程中都必须不停地检测信道，在发送前检测信道是为了获得发送权，在发送过程中检测信道是为了及时发现发送的数据是否发生冲突。站点要在发送数据前先监听信道，只有信道空闲才能发送。冲突检测就是边发送边检测，设配器边发送数据边检测信道上电压的变化情况，当检测到电压变化幅度超过一定的门限值时，表明发生了冲突，适配器要立即停止发送数据，等待一段时间后再次发送。

***无线局域网使用CSMA/CA的原因***：

- 适配器接收到的信号强度往往远小于发送信号的强度，且在无线介质上信号强度的动态变化范围很大，因此若要实现冲突检测，则硬件花费会过大
- 在无线通信中，并非所有站点都能够听见对方(但能产生冲突)，即存在“隐蔽站”问题，从而使得冲突检测机制并b能检测到所有冲突。

***局域网***：☞在一个较小的地理范围内，将各种计算机、外部设备和数据库系统等通过双胶线、同轴电缆等连接介质互相连接起来，组成资源和信息共享的计算机互联网络

***局域网的特点***：主要由拓扑结构、传输介质和介质访问控制方式决定

- 为一个单位所拥有，且地理范围和站点数量均有限
- 所有站点共享较高的总带宽
- 较低的时延和较低的误码率
- 各站为平等关系而非主从关系
- 能进行广播、多播、单播
- 各站点之间以“帧”为单位进行传输

***局域网拓扑结构***：星型结构、环形结构、总线型结构、星型和总线型结合的复合型结构

***局域网的介质访问控制方法：***CSMA/CD协议、令牌总线协议和令牌环协议，其中前两种协议主要用于总线型局域网，令牌环协议主要用于环形局域网

***三种特殊的局域网拓扑实现：***

- 以太网，逻辑拓扑是总线型结构，物理拓扑是星型结构
- 令牌环(token Ring， IEEE 802.5)，逻辑拓扑是环形结构，物理拓扑是星型结构
- FDDI（光纤分布数字接口，IEEE 802.8），逻辑拓扑是环形结构，物理拓扑是双环结构

***以太网MAC协议提供的服务类型***：1. 采用无连接的工作方式，既不对发送的数据帧编号，又不要求接收方发送确认，即以太网尽最大努力交付数据，提供的是不可靠服务，对差错的矫正则由高层完成 2. 发送的数据都使用曼彻斯特编码的信号，每个码元的中间出现一次电压转换，接收方利用这种电压转换方便地将同步信号提取出来。

***交换机的特点***：

- 当交换机的接口直接与主机或其他交换机连接时，通常都工作在全双工方式。
- 交换机具有并行性，能同时连通多对接口，使每对相互通信的主机都能像独占通信介质那样，无冲突地传输数据，这样就不需要使用CSMA/CD协议
- 当交换机的接口连接集线器时，只能使用CSMA/CD协议且只能工作在半双工方式，当前的交换机和计算机中的网卡都能自动识别上述两种情况。
- 交换机是一种即插即用设备，其内部的帧转发表是通过自学习算法，基于网络中各主机间的通信，自动地逐渐建立
- 交换机因为使用专用交换结构芯片，交换速率较高

***交换机主要采用两种交换模式***：

- 直通交换模式，接收到帧的同时就立即按该帧的目的MAC地址(6B)决定转发接口。这种方式的转发时延非常小，缺点是不检查差错就直接转发，因此可能将一些无效帧转发给其他站。直通交换不适用于需要速率匹配、协议转换或者差错检测的线路
- 存储转发交换方式，首先缓存接收到的帧，然后检查帧是否正确(可能还需要进行速率匹配或协议转换)，确认无误后，根据目的MAC地址决定转发接口；若帧出错，则将其丢弃。优点是可靠性高，且支持不同速率接口间的转换，缺点是时延较大









## 设备

***中继器***：放大(数字信号)、整形并转发信号，仅作用于信号的电气部分，中继器木有存储转发功能

***放大器***：放大模拟信号，原理是放大衰减的信号

***集线器***：本质就是多端口的中继器

***交换机***：也称二层交换机，二层是指以太网交换机工作在数据链路层。以太网交换机实质上是一个多接口的网桥，它能将网络分成小的冲突域，为每个用户提供更大的带宽。





# 网络层

**网络层的功能**: 提供主机到主机的通信服务，主要任务是将分组从源主机经过多个网络和多段链路传输到目的主机。该任务可划分为分组转发和路由选择两种重要的功能

***路由与转发***：路由器主要完成两个功能：路由选择和分组转发

- 路由选择，根据路由协议构造路由表，同时经常或定期地与相邻路由器交换信息，获取最新网络拓扑，动态更新维护路由表，以决定分组到达目的地节点的最优路径
- 分组转发，指路由器根据转发表将分组从合适的端口转发出去

***拥塞控制***：因出现过量的分组引起的网络性能下降的现象称为*拥塞*。拥塞控制主要解决的问题是如何获取网络中发生拥塞的信息，从而利用这些信息进行控制。作用是确保网络能够承载所达到的流量，这是一个全局性的过程。

- 与流量控制的区别：流量控制往往是发送方和接受方之间的点对点通信量的控制，流量控制所需要做的是抑制发送方的发送数据的速率，以便接受方来得及接受

1. 开环控制：在设计网络时事先将有关发生拥塞的因素考虑周到，力求网络在工作时不产生拥塞。这是一种静态的预防方法。一旦整个系统启动，中途就不再更改。
2. 闭环控制：事先不考虑有关发送拥塞的各种因素，采用监测网络系统区间是，即时检测那里发生了拥塞，然后将拥塞信息传到合适的地方，以便调整网络系统的运行，并解决出现的问题。闭环控制是基于反馈环路的概念，是一种动态的方法。

***NAT***：网络地址转换是指通过将专用网络地址转换为公用地址，从而对外隐藏内部管理的IP地址。

***子网划分***：从网络的主机号借用若干位作为子网号，当然主机号也相应减少了相同的位数。

***子网掩码***：子网掩码可用来指明分类IP地址的主机号部分被借用了多少位作为子网号

***CIDR***：无分类域间路由选择是一种用于IP地址分配和路由聚合的技术，在变长子网掩码的基础上，提出一种消除传统A、B、C类地址及划分子网的概念。

***ARP***：IP地址到MAC地址的映射

***DHCP***：动态主机配置协议，常用于给主机动态地分配IP地址，它提供了即插即用的联网机制，这种机制允许一台计算机加入新的网络和自动获取IP地址而不用手工参与。

***ICMP***：让主机或路由器报告差错和异常情况。

- 终点不可达；
- 源点抑制；
- 时间超过；
- 参数问题；
- 改变路由；

***不发ICMP差错报文***：

- 对ICMP差错报告报文，不再发送ICMP差错报文
- 对第一个分片的数据报片的所有后续数据报片，都不发送ICMP差错报文
- 对具有多播地址的数据报，都不发送ICMP差错报文
- 对具有特殊地址的(如127.0.0.0或0.0.0.0)数据报，不发送ICMP差错报告报文

***常用的ICMP询问报文有两种类型***：

- 回送请求和回答报文。用来测试目的主机是否可达以及了解其有关状态
- 时间戳请求和回答报文。利用报文中记录的时间戳，发送方可计算出当前的返回时延

***ICMP两个常见应用***：分别是分组网间探测PING和Traceroute，其中PING使用了ICMP的回送请求和回答报文，Traceroute使用了ICMP时间超过报文

***IPV6***:

***自治系统***：是在单一技术管理下的一组路由器，这些路由器使用一种AS内部的路由选择协议和共同的度量。

***域内路由***：在一个自治系统（AS, Autonomous System）内部使用的路由。

特点：

- 路由器数量较多，但都属于同一个管理机构（比如一个 ISP 或大型企业网络）。
- 主要目标：**快速收敛、负载均衡**。
- 协议选择时一般考虑效率，而不是策略。

常见协议：

- **RIP**（Routing Information Protocol，基于距离向量）
- **OSPF**（Open Shortest Path First，基于链路状态）

***域间路由***：不同自治系统之间的路由，即 AS 与 AS 之间的互联。

特点：

- 网络规模更大，路由器属于不同组织。
- 主要目标：**策略控制、可扩展性**（而不仅仅是最短路径）。
- 不同 AS 之间可能有竞争关系，因此不一定公布全部内部信息。

常见协议：

- **BGP**（Border Gateway Protocol，边界网关协议）



